<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schneider Electric - Cooling Economizer PUE Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- 1. Design Tokens (Schneider Electric Style) --- */
        :root {
            --se-green: #3DCD58;       /* Life Is On Green */
            --se-green-dark: #2db645;  /* For slider shadow */
            --se-blue: #4DB4FA;        /* Cyan/Blue secondary */
            --se-header-gray: #9EA0A5; /* Section Header Gray */
            --se-bg-gray: #F2F2F2;     /* Panel Background */
            --text-dark: #333333;
            --text-white: #FFFFFF;
        }

        body { 
            font-family: Arial, Helvetica, sans-serif; 
            margin: 0; 
            background-color: #ffffff; 
            color: var(--text-dark); 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
        }

        /* --- Top Navigation --- */
        header { 
            background-color: var(--se-green); 
            padding: 0 30px; 
            height: 70px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            flex-shrink: 0;
            z-index: 10;
        }
        
        .brand { display: flex; align-items: center; gap: 20px; }
        .brand img { height: 30px; width: auto; display: block; filter: brightness(0) invert(1); }
        .title { 
            font-size: 20px; 
            font-weight: 400; 
            color: #fff;
            border-left: 1px solid rgba(255,255,255,0.5); 
            padding-left: 20px;
            letter-spacing: 0.5px;
        }
        .header-icons i { margin-left: 20px; cursor: pointer; opacity: 0.9; color: #fff; font-size: 20px; }

        /* --- Main Layout --- */
        .container {
            display: flex;
            flex: 1;
            height: calc(100vh - 70px);
            overflow: hidden;
        }

        /* --- Left Sidebar (Input) --- */
        .sidebar {
            width: 400px;
            background-color: #fff;
            padding: 20px;
            border-right: 1px solid #e0e0e0;
            overflow-y: auto;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Input Panels */
        .input-panel {
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        
        .panel-header {
            background: var(--se-header-gray);
            color: white;
            padding: 10px 15px;
            font-weight: bold;
            font-size: 14px;
            text-transform: uppercase;
            display: flex; justify-content: space-between; align-items: center;
        }
        .panel-header i { opacity: 0.8; }

        .panel-body {
            padding: 15px;
            background: var(--se-bg-gray);
            display: flex; flex-direction: column; gap: 15px;
        }

        /* Form Elements */
        .input-row { display: flex; align-items: center; justify-content: space-between; font-size: 13px; color: #555; }
        .input-row label { flex: 1; color: #333; font-weight: normal; }

        .val-group { display: flex; align-items: center; gap: 8px; }
        .val-display { font-weight: bold; min-width: 40px; text-align: right; color: #333; font-size: 13px; }
        .override-box { width: 12px; height: 12px; background: #fff; border: 1px solid #ccc; cursor: pointer; border-radius: 2px; }

        select { 
            padding: 6px; border: 1px solid #ccc; border-radius: 4px; 
            background: linear-gradient(to bottom, #f9f9f9, #e0e0e0);
            color: #333; font-size: 12px; width: 100%; outline: none; cursor: pointer;
        }
        .loc-selects { display: flex; gap: 5px; flex: 1.5; flex-direction: column; }

        /* Schneider Slider */
        .slider-group { flex: 1.5; display: flex; align-items: center; gap: 10px; }
        input[type="range"] {
            flex: 1; height: 8px; -webkit-appearance: none; appearance: none; background: #d3d3d3; border-radius: 4px; outline: none; border: none; cursor: pointer;
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none; appearance: none; width: 20px; height: 20px; 
            border-radius: 50%; 
            background: radial-gradient(circle at 35% 35%, #84e897, var(--se-green), var(--se-green-dark));
            border: 1px solid #2db645;
            cursor: pointer; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.3); transition: transform 0.1s;
            margin-top: -1px;
        }
        input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.1); }

        .gray-button {
            background: #fff; border: 1px solid #ccc; padding: 5px 10px; border-radius: 4px; font-size: 11px; color: #666; width: 100%; text-align: left; position: relative;
        }
        .gray-button::after { content: '▼'; position: absolute; right: 10px; color: #999; font-size: 10px; }

        /* --- Right Content (Results) --- */
        .main-content {
            flex: 1;
            padding: 30px;
            background-color: #ffffff;
            overflow-y: auto;
        }

        .results-panel { 
            background: #ffffff; 
            border: 1px solid #d1d5db; 
            border-radius: 4px; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            overflow: hidden;
            max-width: 1000px;
            margin: 0 auto;
        }
        .results-header { 
            background: var(--se-header-gray); color: #fff; padding: 15px 20px; font-weight: bold; font-size: 14px; display: flex; justify-content: space-between; text-transform: uppercase;
        }
        .results-header i { opacity: 0.9; }

        .results-table { width: 100%; border-collapse: collapse; font-size: 13px; }
        .results-table th { 
            text-align: right; color: #666; font-weight: bold; padding: 12px 20px; font-size: 12px; 
            border-bottom: 2px solid #e0e0e0; background: #fafafa; 
        }
        .results-table th:first-child { text-align: left; }
        
        .results-table td { padding: 15px 20px; border-bottom: 1px solid #f0f0f0; vertical-align: middle; color: #333; }
        
        .arch-title { font-weight: bold; color: var(--se-green); text-transform: uppercase; font-size: 12px; width: 140px; }
        .arch-desc { color: #888; font-size: 11px; width: 220px; line-height: 1.4; }
        
        /* SE Green Energy Bar */
        .bar-container { 
            width: 100%; height: 12px; 
            background: #f0f0f0; 
            border-radius: 6px; 
            overflow: hidden; position: relative; 
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
        }
        .bar-fill { 
            height: 100%; 
            background: var(--se-green); /* Schneider Green */
            width: 0%; 
            transition: width 0.6s ease-out; 
            border-radius: 6px; 
        }
        
        .val-cell { text-align: right; font-weight: bold; color: #333; width: 90px; font-family: Arial, sans-serif; font-size: 13px; }

        /* --- Responsive --- */
        @media screen and (max-width: 900px) {
            .container { flex-direction: column; height: auto; overflow: visible; }
            .sidebar { width: 100%; border-right: none; border-bottom: 1px solid #ddd; padding: 20px; }
            .main-content { padding: 20px; }
            header { padding: 0 15px; }
            .title { font-size: 16px; }
        }

    </style>
</head>
<body>

    <header>
        <div class="brand">
            <img src="https://upload.wikimedia.org/wikipedia/commons/9/95/Schneider_Electric_2007.svg" alt="Schneider Electric">
            <div class="title">Cooling Economizer PUE Calculator</div>
        </div>
        <div class="header-icons">
            <i class="fas fa-cog"></i>
            <i class="fas fa-question-circle"></i>
        </div>
    </header>

    <div class="container">
        
        <div class="sidebar">
            <div class="input-panel">
                <div class="panel-header">Data Center Location <i class="fas fa-map-marker-alt"></i></div>
                <div class="panel-body">
                    <div class="input-row">
                        <div class="loc-selects">
                            <select><option>United States</option></select>
                            <select id="state" onchange="updateRates()">
                                <option value="MA">Massachusetts</option>
                                <option value="CA">California</option>
                                <option value="TX">Texas</option>
                            </select>
                            <select id="city" onchange="updateRates()">
                                <option value="Bos">Boston</option>
                                <option value="LA">Los Angeles</option>
                                <option value="Dal">Dallas</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="input-row" style="margin-top:5px; font-size:10px; color:#999; font-weight:bold; border-bottom: 1px solid #ddd; padding-bottom: 5px;">
                        <span style="flex:1">PARAMETER</span>
                        <span style="width:50px; text-align:right;">VALUE</span>
                        <span style="width:30px; text-align:center;">OVRD</span>
                    </div>

                    <div class="input-row">
                        <label>Currency</label>
                        <div class="val-group">
                            <span class="val-display" style="color:#666">$</span>
                            <div class="override-box"></div>
                        </div>
                    </div>

                    <div class="input-row">
                        <label>Electricity Cost / kWh</label>
                        <div class="val-group">
                            <span class="val-display" id="disp_rate">0.16</span>
                            <div class="override-box"></div>
                        </div>
                    </div>

                    <div class="input-row">
                        <label>CO2 Emissions (kg/kWh)</label>
                        <div class="val-group">
                            <span class="val-display" id="disp_co2">0.579</span>
                            <div class="override-box"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="input-panel">
                <div class="panel-header">Power & Env. Characteristics <i class="fas fa-sliders-h"></i></div>
                <div class="panel-body">
                    <div class="input-row">
                        <label>IT Capacity</label>
                        <div class="slider-group">
                            <div class="gray-button">1000 kW</div>
                        </div>
                    </div>

                    <div class="input-row">
                        <label>IT Load (%)</label>
                        <div class="slider-group">
                            <input type="range" id="load" min="10" max="100" value="50" oninput="calculate()">
                            <span class="val-display" id="val_load" style="width:40px;">50%</span>
                        </div>
                    </div>

                    <div class="input-row">
                        <label>Operating Env.</label>
                        <div class="slider-group">
                            <div class="gray-button">User defined</div>
                        </div>
                    </div>

                    <div class="input-row">
                        <label>Inlet Temp (°F)</label>
                        <div class="slider-group">
                            <input type="range" id="temp" min="65" max="85" value="70" oninput="calculate()">
                            <span class="val-display" id="val_temp" style="width:40px;">70°</span>
                        </div>
                    </div>

                    <div class="input-row">
                        <label>Power Loss</label>
                        <div class="slider-group">
                            <div class="gray-button">None</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="results-panel">
                <div class="results-header">
                    <span>Analysis Results</span>
                    <i class="fas fa-chart-bar"></i>
                </div>
                
                <table class="results-table">
                    <thead>
                        <tr>
                            <th style="width: 15%">Architecture</th>
                            <th style="width: 25%">Description</th>
                            <th style="width: 30%">Efficiency Visualizer</th>
                            <th style="text-align:right;">Cooling PUE</th>
                            <th style="text-align:right;">Annual Cost</th>
                            <th style="text-align:right;">CO2 (Tons)</th>
                        </tr>
                    </thead>
                    <tbody id="results-body">
                        </tbody>
                </table>
            </div>
            
            <div style="margin-top: 20px; font-size: 12px; color: #888; text-align: center;">
                * PUE values are estimated based on typical component efficiencies and psychrometric analysis of the selected location.
            </div>
        </div>

    </div>

    <script>
        // Data & Logic
        const cityData = {
            'Bos': { rate: 0.16, co2: 0.579, climate: 'mixed' }, 
            'LA':  { rate: 0.22, co2: 0.240, climate: 'warm' },  
            'Dal': { rate: 0.11, co2: 0.450, climate: 'hot' }    
        };

        const architectures = [
            { id: 'base', name: 'BASELINE', desc: 'Chiller w/tower & perimeter CRAH (No Economizer)', basePue: 1.78, minPue: 1.6 },
            { id: 'water', name: 'CHILLED WATER', desc: 'Chiller w/tower & PFHX & perimeter CRAH', basePue: 1.52, minPue: 1.3 },
            { id: 'glycol', name: 'GLYCOL-COOLED', desc: 'Perimeter CRAC w/dry cooler (Glycol Loop)', basePue: 1.52, minPue: 1.35 },
            { id: 'air', name: 'AIR-COOLED', desc: 'Direct air economizer w/evap assist', basePue: 1.17, minPue: 1.05 }
        ];

        function updateRates() {
            const cityKey = document.getElementById('city').value;
            const data = cityData[cityKey];
            document.getElementById('disp_rate').textContent = data.rate.toFixed(2);
            document.getElementById('disp_co2').textContent = data.co2.toFixed(3);
            calculate(); 
        }

        function calculate() {
            const loadPct = parseInt(document.getElementById('load').value);
            const tempF = parseInt(document.getElementById('temp').value);
            const cityKey = document.getElementById('city').value;
            const rate = parseFloat(document.getElementById('disp_rate').textContent);
            const co2Factor = parseFloat(document.getElementById('disp_co2').textContent);
            const capacity = 1000; 

            document.getElementById('val_load').textContent = loadPct + "%";
            document.getElementById('val_temp').textContent = tempF + "°";

            let tempBonus = (tempF - 70) * 0.01; 
            if (cityData[cityKey].climate === 'hot') tempBonus *= 0.5; 

            let loadPenalty = 0;
            if (loadPct < 50) loadPenalty = (50 - loadPct) * 0.003;

            let html = "";
            
            architectures.forEach(arch => {
                let currentPue = arch.basePue - tempBonus + loadPenalty;
                if (currentPue < arch.minPue) currentPue = arch.minPue;

                let itLoadKw = capacity * (loadPct / 100);
                let totalEnergyKwh = itLoadKw * currentPue * 8760;
                let cost = totalEnergyKwh * rate;
                let co2 = (totalEnergyKwh * co2Factor) / 1000;

                let costStr = "";
                if (cost > 1000000) {
                    costStr = "$ " + (cost / 1000000).toFixed(1) + "M";
                } else {
                    costStr = "$ " + (cost / 1000).toFixed(0) + "k";
                }

                let co2Str = Math.round(co2).toLocaleString();
                // Bar width calculation (Visual only)
                let barWidth = ((currentPue - 1.0) / 1.0) * 100; 
                if(barWidth > 100) barWidth = 100;
                if(barWidth < 5) barWidth = 5;

                html += `
                    <tr>
                        <td class="arch-title">${arch.name}</td>
                        <td class="arch-desc">${arch.desc}</td>
                        <td>
                            <div class="bar-container">
                                <div class="bar-fill" style="width: ${barWidth}%"></div>
                            </div>
                        </td>
                        <td class="val-cell">${currentPue.toFixed(2)}</td>
                        <td class="val-cell">${costStr}</td>
                        <td class="val-cell">${co2Str}</td>
                    </tr>
                `;
            });

            document.getElementById('results-body').innerHTML = html;
        }

        updateRates();
    </script>
</body>
</html>