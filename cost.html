<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schneider Electric - TCO & ROI Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- 1. Design Tokens (Schneider Electric Style) --- */
        :root {
            --se-green: #3DCD58;       /* Life Is On Green */
            --se-green-dark: #2db645;  /* For slider shadow */
            --se-blue: #4DB4FA;        /* Cyan/Blue secondary */
            --se-header-gray: #9EA0A5; /* Section Header Gray */
            --se-bg-gray: #F2F2F2;     /* Panel Background */
            --text-dark: #333333;
            --text-white: #FFFFFF;
        }

        body { 
            font-family: Arial, Helvetica, sans-serif; 
            margin: 0; 
            background-color: #ffffff; 
            color: var(--text-dark); 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
        }

        /* --- Top Navigation --- */
        header { 
            background-color: var(--se-green); 
            padding: 0 30px; 
            height: 70px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        
        .brand { display: flex; align-items: center; gap: 20px; }
        .brand img { height: 30px; width: auto; display: block; filter: brightness(0) invert(1); }
        .title { 
            font-size: 20px; 
            font-weight: 400; 
            color: #fff;
            border-left: 1px solid rgba(255,255,255,0.5); 
            padding-left: 20px;
            letter-spacing: 0.5px;
        }

        /* --- Main Layout --- */
        .container { 
            display: flex; 
            flex: 1; 
            height: calc(100vh - 70px); 
            overflow: hidden;
        }

        /* --- Left Sidebar (Controls) --- */
        .sidebar {
            width: 380px;
            background-color: #fff;
            padding: 30px;
            border-right: 1px solid #e0e0e0;
            overflow-y: auto;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        /* Panel Style for Inputs */
        .control-section { 
            background: #fff;
            border: 1px solid #e0e0e0; 
            border-radius: 4px; 
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .section-header {
            padding: 10px 15px;
            font-weight: bold;
            font-size: 14px;
            text-transform: uppercase;
            color: #fff;
            display: flex; align-items: center; gap: 10px;
        }

        /* Distinguish Plan A vs Plan B with Header Colors */
        .header-legacy { background: var(--se-header-gray); }
        .header-new { background: var(--se-green); }

        .section-body {
            padding: 20px;
            background: var(--se-bg-gray);
            display: flex; flex-direction: column; gap: 15px;
        }
        
        label { 
            display: flex; justify-content: space-between; 
            margin-bottom: 5px; font-weight: normal; font-size: 13px; color: #555; 
        }
        
        .val-display { color: #333; font-weight: bold; font-family: Arial, sans-serif; }

        /* --- Schneider Style Slider (Green Ball) --- */
        input[type="range"] { 
            width: 100%; height: 8px; background: #d3d3d3; border-radius: 4px; outline: none; appearance: none; -webkit-appearance: none; cursor: pointer;
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
        }
        input[type="range"]::-webkit-slider-thumb { 
            appearance: none; -webkit-appearance: none; width: 22px; height: 22px; 
            border-radius: 50%; 
            background: radial-gradient(circle at 35% 35%, #84e897, var(--se-green), var(--se-green-dark));
            border: 1px solid #2db645;
            cursor: pointer; 
            transition: transform 0.1s; box-shadow: 0 3px 6px rgba(0,0,0,0.3);
            margin-top: -1px;
        }
        input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.1); }

        /* --- Right Content Area --- */
        .main-content { 
            flex: 1; padding: 40px; display: flex; flex-direction: column; align-items: center; 
            overflow-y: auto; background-color: #ffffff; 
        }
        
        /* Result Cards */
        .result-cards { display: flex; gap: 20px; margin-bottom: 30px; width: 100%; max-width: 1000px; }
        
        .card { 
            flex: 1; 
            background: #ffffff; 
            padding: 25px; 
            border-radius: 4px; 
            text-align: center; 
            border: 1px solid #e0e0e0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: transform 0.2s;
            position: relative;
        }
        .card:hover { transform: translateY(-3px); }

        .card h4 { margin: 0; font-size: 12px; color: #666; text-transform: uppercase; letter-spacing: 0.5px; font-weight: 600; }
        .card h2 { margin: 10px 0 0; font-size: 28px; color: #333; font-weight: 700; }

        /* Highlight Logic */
        .card.winner { 
            border-bottom: 5px solid var(--se-green); 
        } 
        .card.neutral { border-bottom: 5px solid #f59e0b; }

        /* Chart Container */
        .chart-box { 
            width: 100%; 
            max-width: 1000px;
            background: #ffffff; 
            padding: 0; /* Removing padding to use header */
            border-radius: 4px; 
            border: 1px solid #e0e0e0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            min-height: 400px;
            display: flex; flex-direction: column;
        }

        .chart-header {
            background: var(--se-header-gray);
            color: white;
            padding: 10px 15px;
            font-weight: bold;
            font-size: 14px;
            text-transform: uppercase;
            border-radius: 4px 4px 0 0;
            display: flex; justify-content: space-between;
        }

        .chart-body { flex: 1; padding: 20px; position: relative; }

        /* --- Mobile Responsive --- */
        @media screen and (max-width: 900px) {
            body { height: auto; min-height: 100vh; overflow-y: auto; }
            .container { flex-direction: column; height: auto; overflow: visible; }
            .sidebar { width: 100%; border-right: none; border-bottom: 1px solid #ddd; padding: 20px; }
            .main-content { padding: 20px; }
            .result-cards { flex-direction: column; }
            header { padding: 0 15px; }
            .title { font-size: 16px; }
        }

    </style>
</head>
<body>

    <header>
        <div class="brand">
            <img src="https://upload.wikimedia.org/wikipedia/commons/9/95/Schneider_Electric_2007.svg" alt="Schneider Electric">
            <div class="title">TCO & ROI Calculator</div>
        </div>
        <div><i class="fas fa-chart-line" style="color: #fff; font-size: 24px; opacity: 0.9;"></i></div>
    </header>

    <div class="container">
        <div class="sidebar">
            
            <div class="control-section">
                <div class="section-header header-legacy">
                    <i class="fas fa-history"></i> Legacy / Existing
                </div>
                <div class="section-body">
                    <div>
                        <label>Initial Cost <span id="valA_init" class="val-display">$0</span></label>
                        <input type="range" id="inputA_init" min="0" max="50000" step="1000" value="0">
                    </div>
                    <div>
                        <label>Annual OpEx <span id="valA_ops" class="val-display">$8,000</span></label>
                        <input type="range" id="inputA_ops" min="1000" max="20000" step="500" value="8000">
                    </div>
                </div>
            </div>

            <div class="control-section">
                <div class="section-header header-new">
                    <i class="fas fa-leaf"></i> Schneider Electric
                </div>
                <div class="section-body">
                    <div>
                        <label>Initial Cost <span id="valB_init" class="val-display">$20,000</span></label>
                        <input type="range" id="inputB_init" min="0" max="100000" step="1000" value="20000">
                    </div>
                    <div>
                        <label>Annual OpEx <span id="valB_ops" class="val-display">$3,000</span></label>
                        <input type="range" id="inputB_ops" min="1000" max="20000" step="500" value="3000">
                    </div>
                </div>
            </div>

        </div>

        <div class="main-content">
            <div class="result-cards">
                <div class="card" id="cardA">
                    <h4>Legacy Total (10 Years)</h4>
                    <h2 id="totalA">$0</h2>
                </div>
                <div class="card" id="cardB">
                    <h4>Schneider Total (10 Years)</h4>
                    <h2 id="totalB">$0</h2>
                </div>
                <div class="card neutral">
                    <h4>ROI / Break-even</h4>
                    <h2 id="breakeven" style="color: #d97706;">Calculating...</h2>
                </div>
            </div>

            <div class="chart-box">
                <div class="chart-header">
                    <span>Cumulative Cost Analysis</span>
                    <i class="fas fa-chart-area"></i>
                </div>
                <div class="chart-body">
                    <canvas id="costChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Chart.js Settings
        Chart.defaults.font.family = "Arial, sans-serif";
        Chart.defaults.color = '#666';

        // 1. Elements
        const inputs = {
            a_init: document.getElementById('inputA_init'),
            a_ops:  document.getElementById('inputA_ops'),
            b_init: document.getElementById('inputB_init'),
            b_ops:  document.getElementById('inputB_ops')
        };

        // 2. Init Chart
        const ctx = document.getElementById('costChart').getContext('2d');
        const costChart = new Chart(ctx, {
            type: 'line', 
            data: {
                labels: ['Y0', 'Y1', 'Y2', 'Y3', 'Y4', 'Y5', 'Y6', 'Y7', 'Y8', 'Y9', 'Y10'], 
                datasets: [
                    {
                        label: 'Legacy / Existing',
                        data: [],
                        borderColor: '#9EA0A5', // SE Gray
                        backgroundColor: 'rgba(158, 160, 165, 0.1)',
                        pointBackgroundColor: '#9EA0A5',
                        pointRadius: 4,
                        borderWidth: 2,
                        fill: false,
                        tension: 0.3,
                        borderDash: [5, 5]
                    },
                    {
                        label: 'Schneider Electric',
                        data: [],
                        borderColor: '#3DCD58', // SE Green
                        backgroundColor: 'rgba(61, 205, 88, 0.1)',
                        pointBackgroundColor: '#3DCD58',
                        pointRadius: 4,
                        borderWidth: 3,
                        fill: false,
                        tension: 0.3
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { mode: 'index', intersect: false },
                plugins: {
                    legend: {
                        position: 'top',
                        labels: { usePointStyle: true, font: { size: 12, weight: 'bold' } }
                    },
                    tooltip: {
                        backgroundColor: '#333',
                        padding: 10,
                        titleFont: { size: 13 },
                        bodyFont: { size: 13 }
                    }
                },
                scales: {
                    y: { 
                        title: { display: true, text: 'Cumulative Cost ($)', color: '#999', font: { weight: 'bold' } },
                        grid: { borderDash: [2, 4], color: '#eee' },
                        ticks: { color: '#666' }
                    },
                    x: {
                        grid: { display: false },
                        ticks: { color: '#666', font: { weight: 'bold' } }
                    }
                }
            }
        });

        // 3. Calculation Logic
        function calculate() {
            let a_init = parseInt(inputs.a_init.value);
            let a_ops  = parseInt(inputs.a_ops.value);
            let b_init = parseInt(inputs.b_init.value);
            let b_ops  = parseInt(inputs.b_ops.value);

            // Update Text
            document.getElementById('valA_init').innerText = "$" + a_init.toLocaleString();
            document.getElementById('valA_ops').innerText  = "$" + a_ops.toLocaleString();
            document.getElementById('valB_init').innerText = "$" + b_init.toLocaleString();
            document.getElementById('valB_ops').innerText  = "$" + b_ops.toLocaleString();

            let dataA = [];
            let dataB = [];
            let years = 10;
            let breakEvenYear = "No Cross";

            for(let i = 0; i <= years; i++) {
                let costA = a_init + (i * a_ops);
                let costB = b_init + (i * b_ops);
                
                dataA.push(costA);
                dataB.push(costB);

                if (i > 0 && costB < costA && dataB[i-1] >= dataA[i-1]) {
                    breakEvenYear = "Year " + i;
                }
            }

            // Update Chart
            costChart.data.datasets[0].data = dataA;
            costChart.data.datasets[1].data = dataB;
            costChart.update();

            // Update Summary
            let finalA = dataA[10];
            let finalB = dataB[10];
            document.getElementById('totalA').innerText = "$" + finalA.toLocaleString();
            document.getElementById('totalB').innerText = "$" + finalB.toLocaleString();
            document.getElementById('breakeven').innerText = breakEvenYear;

            // Highlight Winner
            document.getElementById('cardA').classList.toggle('winner', finalA < finalB);
            document.getElementById('cardB').classList.toggle('winner', finalB < finalA);
        }

        // 4. Bind Events
        Object.values(inputs).forEach(input => {
            input.addEventListener('input', calculate);
        });

        // Init
        calculate();
    </script>
</body>
</html>